<div class="tendrl-create-rbd-container container-fluid">
    <ol class="breadcrumb">
        <li>
            <a href="#">RBDs</a>
        </li>
        <li class="active"> <strong>Create RBD</strong>
        </li>
    </ol>
    <h1 class="bold-text">Create RBD</h1>
    <div class="create-rbd-wizard" ng-if="!createRBDCntrl.taskSubmitted">
        <div class="wizard-pf">
            <div>
                <div class="wizard-pf-body clearfix">
                    <div class="wizard-pf-steps">
                        <ul class="wizard-pf-steps-indicator">
                            <li class="wizard-pf-step active" ng-class="{active: (createRBDCntrl.step === 1)}" data-tabgroup="1">
                                <a><span class="wizard-pf-step-number">1</span><span class="wizard-pf-step-title">Basic Settings</span></a>
                            </li>
                            <li class="wizard-pf-step" data-tabgroup="2" ng-class="{active: (createRBDCntrl.step === 2)}">
                                <a><span class="wizard-pf-step-number">2</span><span class="wizard-pf-step-title">Backing Pool</span></a>
                            </li>
                            <li class="wizard-pf-step" data-tabgroup="3" ng-class="{active: (createRBDCntrl.step === 3)}">
                                <a><span class="wizard-pf-step-number">3</span><span class="wizard-pf-step-title">Review</span></a>
                            </li>
                        </ul>
                    </div>
                    <div class="wizard-pf-row">
                        <div class="wizard-pf-main">
                            <div class="wizard-pf-contents" ng-if="createRBDCntrl.step === 1">
                                <form class="form-horizontal">
                                    <!-- replacing id with data-id to pass build errors -->
                                    <div class="form-group required">
                                        <label class="col-sm-3 col-md-2 control-label" for="rbdName">RBD Name</label>
                                        <div class="col-sm-8 col-md-3">
                                            <input type="text" data-id="rbdName" class="form-control" name="rbdName" ng-model="createRBDCntrl.rbdName">
                                        </div>
                                    </div>
                                    <div class="form-group required">
                                        <label class="col-sm-2 col-md-2 control-label" for="rbd-count">RBDs to Create</label>
                                        <div class="col-sm-4 col-md-2">
                                            <input type="number" data-id="rbd-count" class="form-control" ng-model="createRBDCntrl.rbdCount" ng-change="createRBDCntrl.updateRBDName()" required>
                                        </div>
                                        <div class="col-sm-6 col-md-8">
                                            <span ng-repeat="name in createRBDCntrl.rbdNames">{{name}}
                                                <span ng-if="$index !== (createRBDCntrl.rbdNames.length-1)">,</span>
                                            </span>
                                        </div>
                                    </div>
                                    <div class="form-group required">
                                        <label class="col-sm-2 col-md-2 control-label" for="cluster-name">Cluster Name</label>
                                        <div class="col-sm-8 col-md-3">
                                            <select data-ng-options="cluster.name for cluster in createRBDCntrl.clusterList" data-ng-model="createRBDCntrl.selectedCluster" class="form-control" data-id="cluster-name"></select>
                                        </div>
                                        <div class="col-sm-2 col-md-2">
                                            <span>{{createRBDCntrl.selectedCluster.size || "NA"}} {{createRBDCntrl.selectedCluster.unit}} available</span>
                                        </div>
                                    </div>
                                    <div class="form-group required">
                                        <label class="col-sm-2 col-md-2 control-label" for="target-size">Target Size</label>
                                        <div class="col-sm-5 col-md-2">
                                            <input type="number" data-id="target-size" ng-model="createRBDCntrl.targetSize" class="form-control">
                                        </div>
                                        <div class="col-sm-2 col-md-1">
                                            <select data-ng-options="unit for unit in createRBDCntrl.sizeUnits" data-ng-model="createRBDCntrl.selectedUnit" class="form-control"></select>
                                        </div>
                                        <div class="col-sm-3 col-md-3" ng-if="createRBDCntrl.targetSize && createRBDCntrl.rbdCount">
                                            <span>{{createRBDCntrl.targetSize * createRBDCntrl.rbdCount}} {{createRBDCntrl.selectedUnit}} needed ({{createRBDCntrl.rbdCount}} RBDs at {{createRBDCntrl.targetSize}} {{createRBDCntrl.selectedUnit}} each)</span>
                                        </div>
                                    </div>
                                    <div class="form-group" ng-if="createRBDCntrl.isSizeGreater()">
                                        <div class="col-sm-2 col-md-2"></div>
                                        <div class="col-md-6">
                                            <span class="pficon pficon-warning-triangle-o"></span> Storage needed exceeds the amount of storage available in this cluster
                                        </div>
                                    </div>
                                </form>
                            </div>
                            <!--Step 2-->
                            <div class="wizard-pf-contents" ng-if="createRBDCntrl.step === 2">
                                <form class="form-horizontal">
                                    <div class="form-group required">
                                        <label class="col-sm-4 col-md-3 control-label" for="aliquam">What will you use for a backing pool?</label>
                                        <div class="radio col-md-2">
                                            <label>
                                                <input type="radio" name="poolOptions" id="poolOption1" value="existing" checked ng-model="createRBDCntrl.backingPool"> Choose existing pool
                                            </label>
                                        </div>
                                        <div class="radio col-md-2">
                                            <label>
                                                <input type="radio" name="poolOptions" id="poolOption2" value="new" ng-model="createRBDCntrl.backingPool"> Create new pool
                                            </label>
                                        </div>
                                    </div>
                                    <div class="form-group pool-section" ng-if="createRBDCntrl.backingPool === 'existing'">
                                        <div class="row">
                                            <div class="col-md-2">
                                                <select data-ng-options="pool.name for pool in createRBDCntrl.poolList" data-ng-model="createRBDCntrl.selectedPool" class="form-control" data-id="pool-name"></select>
                                            </div>
                                        </div>
                                        <div class="col-md-8 pool-table">
                                            <div class="row">
                                                <div class="col-md-12">
                                                    <div class="col-md-2">Type</div>
                                                    <div class="col-md-1">OSDs</div>
                                                    <div class="col-md-1">Replicas</div>
                                                    <div class="col-md-2">PG Count</div>
                                                    <div class="col-md-4">Journal Configuration</div>
                                                    <div class="col-md-2">Quotas</div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-md-12">
                                                    <div class="col-md-2">{{createRBDCntrl.selectedPool.type || "NA"}}</div>
                                                    <div class="col-md-1">{{createRBDCntrl.selectedPool.osdCount || "NA"}}</div>
                                                    <div class="col-md-1">{{createRBDCntrl.selectedPool.replicaCount || "NA"}}</div>
                                                    <div class="col-md-2">{{createRBDCntrl.selectedPool.pgCount || "NA"}}</div>
                                                    <div class="col-md-4">{{createRBDCntrl.selectedPool.conf || "NA"}}</div>
                                                    <div class="col-md-2">{{createRBDCntrl.selectedPool.quotas || "NA"}}</div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </form>
                            </div>
                            <div class="wizard-pf-contents" ng-if="createRBDCntrl.step === 3">
                                <div class="rbd-summary row">
                                    <h3 class="bold-text desc">{{createRBDCntrl.rbdCount}} RBD<span ng-if="createRBDCntrl.rbdCount > 1">s</span> to create in cluster {{createRBDCntrl.selectedCluster.name}}
                                    </h3>
                                    <div ng-if="createRBDCntrl.rbdCount > 1">
                                        <div class="list-group list-view-pf list-view-pf-equalized-column" ng-repeat="name in createRBDCntrl.rbdNames">
                                            <div class="list-group-item">
                                                <div class="col-md-2">
                                                    <div class="list-view-pf-additional-info-item list-view-pf-additional-info-item-stacked">
                                                        <div class="bold-text">Name</div>
                                                        <h5 class="pull-left counts">{{name}}</h5>
                                                    </div>
                                                </div>
                                                <div class="col-md-2">
                                                    <div class="list-view-pf-additional-info-item list-view-pf-additional-info-item-stacked">
                                                        <div class="bold-text">Target Size</div>
                                                        <h5 class="pull-left counts">{{createRBDCntrl.targetSize}}</h5>
                                                    </div>
                                                </div>
                                                <div class="col-md-2">
                                                    <button type="button" class="btn btn-default">Edit</button>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="horizontal-line"></div>
                                    </div>
                                    <div ng-if="createRBDCntrl.rbdCount === 1">
                                        <div class="col-md-4 col-sm-6 single-rbd-summary">
                                            <div class="row">
                                                <div class="col-md-6 col-sm-6">Name</div>
                                                <div class="col-md-6 col-sm-6">{{createRBDCntrl.rbdNames[0]}}</div>
                                            </div>
                                            <div class="row">
                                                <div class="col-md-6 col-sm-6">Target Size</div>
                                                <div class="col-md-6 col-sm-6">{{createRBDCntrl.targetSize}}</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="pool-summary">
                                    <div class="bold-text">Backing Pool</div>
                                    <div class="desc">A
                                        <span ng-if="createRBDCntrl.backingPool === 'existing'">existing </span>
                                        <span ng-if="createRBDCntrl.backingPool !== 'existing'">new backing </span>pool will be created in <span class="bold-text">{{createRBDCntrl.selectedCluster.name}}.</span>
                                    </div>
                                    <div class="list-group list-view-pf list-view-pf-equalized-column">
                                        <div class="list-group-item">
                                            <div class="col-md-2">
                                                <div class="list-view-pf-additional-info-item list-view-pf-additional-info-item-stacked">
                                                    <div class="bold-text">Name</div>
                                                    <h5 class="pull-left counts">{{createRBDCntrl.selectedPool.name}}</h5>
                                                </div>
                                            </div>
                                            <div class="col-md-2">
                                                <div class="list-view-pf-additional-info-item list-view-pf-additional-info-item-stacked">
                                                    <div class="bold-text">Type</div>
                                                    <h5 class="pull-left counts">{{createRBDCntrl.selectedPool.type || "NA"}}</h5>
                                                </div>
                                            </div>
                                            <div class="col-md-1">
                                                <div class="list-view-pf-additional-info-item list-view-pf-additional-info-item-stacked">
                                                    <div class="bold-text">OSDs</div>
                                                    <h5 class="pull-left counts">{{createRBDCntrl.selectedPool.osdCount || "NA"}}</h5>
                                                </div>
                                            </div>
                                            <div class="col-md-1">
                                                <div class="list-view-pf-additional-info-item list-view-pf-additional-info-item-stacked">
                                                    <div class="bold-text">Replicas</div>
                                                    <h5 class="pull-left counts">{{createRBDCntrl.selectedPool.replicaCount || "NA"}}</h5>
                                                </div>
                                            </div>
                                            <div class="col-md-2">
                                                <div class="list-view-pf-additional-info-item list-view-pf-additional-info-item-stacked">
                                                    <div class="bold-text">PG Count</div>
                                                    <h5 class="pull-left counts">{{createRBDCntrl.selectedPool.pgCount || "NA"}}</h5>
                                                </div>
                                            </div>
                                            <div class="col-md-2">
                                                <div class="list-view-pf-additional-info-item list-view-pf-additional-info-item-stacked">
                                                    <div class="bold-text">Journal Configuration</div>
                                                    <h5 class="pull-left counts">{{createRBDCntrl.selectedPool.conf || "NA"}}</h5>
                                                </div>
                                            </div>
                                            <div class="col-md-2">
                                                <div class="list-view-pf-additional-info-item list-view-pf-additional-info-item-stacked">
                                                    <div class="bold-text">Quotas</div>
                                                    <h5 class="pull-left counts">{{createRBDCntrl.selectedPool.quotas || "NA"}}</h5>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="horizontal-line"></div>
                                </div>
                            </div>
                            <div class="wizard-pf-contents hidden">
                                <div class="wizard-pf-process blank-slate-pf">
                                    <div class="spinner spinner-lg blank-slate-pf-icon"></div>
                                    <h3 class="blank-slate-pf-main-action">Deployment in progress</h3>
                                    <p class="blank-slate-pf-secondary-action">Lorem ipsum dolor sit amet, porta at suspendisse ac, ut wisi vivamus, lorem sociosqu eget nunc amet. </p>
                                </div>
                                <div class="wizard-pf-complete blank-slate-pf hidden">
                                    <div class="wizard-pf-success-icon"><span class="glyphicon glyphicon-ok-circle"></span></div>
                                    <h3 class="blank-slate-pf-main-action">Deployment was successful</h3>
                                    <p class="blank-slate-pf-secondary-action">Lorem ipsum dolor sit amet, porta at suspendisse ac, ut wisi vivamus, lorem sociosqu eget nunc amet. </p>
                                    <button type="button" class="btn btn-lg btn-primary">
                                        View Deployment
                                    </button>
                                </div>
                            </div>
                        </div>
                        <!-- /.wizard-pf-main -->
                    </div>
                </div>
                <!-- /.wizard-pf-body -->
                <div class="modal-footer wizard-pf-footer">
                    <button type="button" class="btn btn-default wizard-pf-back" ng-click="createRBDCntrl.updateStep('dec')" ng-disabled="createRBDCntrl.step === 1">
                        <span class="i fa fa-angle-left"></span> Back
                    </button>
                    <button type="button" class="btn btn-primary wizard-pf-next" ng-click="createRBDCntrl.updateStep('inc')">
                        <span ng-if="createRBDCntrl.step !== 3">Next</span>
                        <span ng-if="createRBDCntrl.step === 3">Create RBDs</span>
                        <span class="i fa fa-angle-right;"></span>
                    </button>
                    <button type="button" class="btn btn-default btn-cancel wizard-pf-cancel wizard-pf-dismiss">Cancel</button>
                </div>
                <!-- /.wizard-pf-footer -->
            </div>
        </div>
    </div>
    <div ng-if="createRBDCntrl.taskSubmitted" class="blank-slate-pf centered">
        <div class="blank-slate-pf-icon">
            <i class="pficon pficon-ok"></i>
        </div>
        <div>
            <h1><label>Create RBD(s) Submitted</label></h1>
            <div class="text-cnter"> An task has been submitted to the background for each RBD requested. You will be notified when processing is complete and the new RBDs are ready for use. </div>
        </div>
        <div class="blank-slate-pf-main-action">
            <button class="btn btn-primary btn-lg" ng-click="createRBDCntrl.viewTaskProgress()">View Task Progress</button>
        </div>
    </div>
</div>
